function Scroll(obj){this.$container=$(obj.container);this.$scrollObj=$(obj.scrollObj);this.visibleWidth=parseFloat(this.$container.css("width"));this.visibleHeight=parseFloat(this.$container.css("height"));this.scrollWidth=parseFloat(this.$scrollObj.css("width"));this.scrollHeight=parseFloat(this.$scrollObj.css("height"));this.newY=0;this.lastY=0;this.deltaY=0;this.scrollY=0;this.limitY=0;this.overlimitY=0;this.slideK=2;this.startTime=0;this.offsetTime=0;this.isBottom=false;this.refresh=obj.refresh?obj.refresh:undefined;this.isRefreshing=false;this.preloader;if(this.refresh){this.preloader=this.$container.find(".scroll-preloader");this.preloader.remove();this.refresh()}this.init()}$.extend(Scroll.prototype,{init:function(){this.newY=0;this.lastY=0;this.deltaY=0;this.scrollY=0;this.update();if(this.scrollY==this.limitY){this.isBottom=true}this.bindEvent()},update:function(){this.visibleWidth=parseFloat(this.$container.css("width"));this.visibleHeight=parseFloat(this.$container.css("height"));this.scrollWidth=parseFloat(this.$scrollObj.css("width"));this.scrollHeight=parseFloat(this.$scrollObj.css("height"));this.limitY=this.scrollHeight>this.visibleHeight?-(this.scrollHeight-this.visibleHeight):0;var paddingTop=parseFloat(this.$container.css("paddingTop"));var paddingBottom=parseFloat(this.$container.css("paddingBottom"));this.limitY-=paddingTop+paddingBottom},bindEvent:function(){this.$container.on({touchstart:this.onTouchstart.bind(this),touchmove:this.onTouchmove.bind(this),touchend:this.onTouchend.bind(this)})},onTouchstart:function(e){e.stopPropagation();this.newY=e.originalEvent.changedTouches[0].pageY;this.lastY=this.newY;this.startTime=(new Date).getTime()},onTouchmove:function(e){e.stopPropagation();e.preventDefault();this.offsetTime=(new Date).getTime()-this.startTime;this.newY=e.originalEvent.changedTouches[0].pageY;this.deltaY=this.newY-this.lastY;if(this.scrollY+this.deltaY<0){if(this.scrollY+this.deltaY>this.limitY){this.scrollY+=this.deltaY*this.slideK}else{this.scrollY=this.limitY;if(this.refresh&&!this.isRefreshing){this.processRefresh()}}}else{this.scrollY=0}this.$scrollObj[0].style.webkitTransform="translate3d(0,"+this.scrollY+"px,0)";this.lastY=this.newY},onTouchend:function(e){e.stopPropagation();this.offsetTime=(new Date).getTime()-this.startTime},processRefresh:function(){this.isRefreshing=true;this.refresh()},onTransitionEndToBottom:function(){console.log("1");this.isBottom=false;this.scrollY=this.limitY;this.slideK=2;this.$scrollObj.off("webkitTransitionEnd")}});